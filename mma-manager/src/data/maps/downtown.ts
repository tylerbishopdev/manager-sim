import type { TileMapData } from '../../types/gameplay';

// Tile legend:
// 0 = pavement, 1 = building wall, 7 = road, 8 = sidewalk, 5 = door, 9 = tree/obstacle

const W = 20;
const H = 14;

const ground = [
  1,1,1,1,1,5,5,1,1,1,1,1,1,1,5,5,1,1,1,1,
  8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,
  8,0,0,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,8,
  8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,
  8,0,0,9,0,0,0,0,0,0,0,0,0,0,9,0,0,0,0,8,
  8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,
  8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,
  1,1,1,5,5,1,1,1,1,1,1,1,1,5,5,1,1,1,1,1,
  1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
  1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
  1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
];

const collision = [
  1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,
  0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,
  0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
  1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
  0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,
  0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,
  1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
  1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
  1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
];

export const downtownMap: TileMapData = {
  id: 'downtown',
  name: 'Downtown',
  width: W,
  height: H,
  tileSize: 48,
  layers: { ground, objects: [], collision },
  spawns: [
    { id: 'player', x: 7, y: 1, type: 'player' },
    { id: 'npc_scout', x: 4, y: 2, type: 'npc' },
    { id: 'npc_promoter', x: 15, y: 7, type: 'npc' },
  ],
  doors: [
    // Top: back to gym
    { x: 5, y: 0, toMap: 'gym', toX: 6, toY: 9 },
    { x: 6, y: 0, toMap: 'gym', toX: 7, toY: 9 },
    // Top right: arena
    { x: 14, y: 0, toMap: 'arena', toX: 7, toY: 10 },
    { x: 15, y: 0, toMap: 'arena', toX: 8, toY: 10 },
    // Bottom: agent's office
    { x: 3, y: 10, toMap: 'agents_office', toX: 4, toY: 1 },
    { x: 4, y: 10, toMap: 'agents_office', toX: 5, toY: 1 },
    // Bottom right: rival gym
    { x: 13, y: 10, toMap: 'rival_gym', toX: 5, toY: 1 },
    { x: 14, y: 10, toMap: 'rival_gym', toX: 6, toY: 1 },
  ],
  interactables: [
    { x: 4, y: 2, id: 'scout_npc', label: 'Scout', action: 'scout' },
    { x: 15, y: 7, id: 'promoter_npc', label: 'Promoter', action: 'fights' },
  ],
};
